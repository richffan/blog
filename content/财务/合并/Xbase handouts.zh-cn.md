---
title: "xbase讲义"
categories: [审计]
tags: [合并]
date: 2023-08-01
---
本来不想讲xbase的方法的，但好几个天健的学员问，而且他们必须要用xbase编现金流。基于此，小哥研究了一天，终于把xbase的逻辑及用法给搞清楚了。

天健是老东家了。大概是18年的六七月份，所里有个培训，讲现金流的。小哥那时候还是个小朋友，也跟着屁颠屁颠跑过去了，发现已经有好多人在那儿听了。这足以说明，有好多人想了解xbase。小哥那个部门，无论是高级审计员、审计经理、高级经理，都没人精通xbase，有个高级经理稍微会用一下下，但编得不太准，被券商发现了错误，贼尴尬。

独孤九剑一共九式：总诀式、破剑式、破刀式、破枪式、破鞭式、破索式、破掌式、破箭式、破气式。

总诀式，指的是逻辑。任何一门技能，都是建立在逻辑的基础上的，小哥写文章，也都是围绕着一定的逻辑来写的。只要把其中的逻辑理清楚了，任何问题都能解决掉。

破剑式，在小哥看来，就是破解合并报表的逻辑，这一招，小哥在一年前就会了，如今更加娴熟了。

破刀式，在小哥看来，就是现金流。这一次，我们破解的是天健xbase的逻辑。当我们把所有重要的财务技能给破解了，也就学会了“独孤九剑”，就能真正笑傲江湖了。

天健的xbase方法，跟我们的模板法逻辑是一样的，跟工作底稿法的逻辑也是一样的，它们的本质都是公式法：

**现金资产期末数** **- 现金资产期初数** **= （负债期末数-负债期初数）** **+ （所有者权益期末数** **- 所有者权益期初数）-（非现金资产期末数** **- 非现金资产期初数）**

几乎所有的现金流，都是以这个公式为基础编制出来的。除了用序时账一笔笔指定的之外，序时账方法有还几个缺陷，高手一般不用。

下面我们来讲一下xbase的逻辑。

![](https://img.richfan.site/obsidian/xbase讲义_1.webp) 

上图是天健的试算平衡表，红色方框框住的xbase、分析分录、分析分录（综合分析）、补充分录、现金流量表、补充资料，这几个表，是与现金流相关的。

只要我们把TB表填好，就能自动生成现金流量表的主表和附表。它生成的逻辑跟我们之前讲的是一样的，把资产负债表中，非货币资金科目的所有变动额（期末-期初）全部“轧”到相应的现金流项目里面。比如把应收账款的“期初-期末”轧到“销售商品、提供劳务收到的现金”，每个非货币资金科目的变动额都给它配一个现金流项目，最终汇总起来肯定等于货币资金的期末减期初。

因此，xbase能自动生成现金流量表，只要把TB填好，它就能出来。但是，它不准确，因为是轧出来的，有好多特殊情况没考虑到。比如上面讲的应收账款的变动额，当存在坏账的时候，坏账不影响现金流，把变动额全部放在“销售商品、提供劳务收到的现金”就不合适。那么，怎么解决这种特殊情况呢？这时，xbase就是专门解决这种情况的。

也就是说，先通过公式把现金流给“轧”平，再通过xbase来修正，使它不断趋近真实情况。所以，天健xbase的现金流编制过程就是，先轧平，再调整精确。

（1）**xbase**

这张表，如前面所说，它就是用来调整特殊事项的，比如坏账、折旧、摊销、借贷方发生额分别属于不同的现金流项目等。因为通过公式“轧”出来的现金流量表，只能“轧”到一个现金流项目，当一个科目的变动额对应多个现金流项目的时候，我们也只能“轧”到其中一个，这就不准了。Xbase的功能就是，解决那些“一对多”的问题，把这个“多”处理掉，那么轧出来的就准确了。

（2）**分析分录**

这张表就能清晰地显示出每一个资产负债表、利润表的变动额分别属于哪些现金流项目。其实可以直接在这张表填也是可以的，不用xbase了，因为xbase中的所有数据都会链接到这张表来。那么，为什么还要xbase呢？主要原因是，xbase这些数据，可以按科目拆分出来，小朋友填底稿的时候，把自己科目的xbase填好，项目经理编现金流的时候，只要把小朋友填的xbase汇总到一起，现金流量表就出来了！把现金流量表的任务分配给每一个小朋友，这就减轻了项目经理的负担。然而，现实中遇到的困难是，如果小朋友不理解现金流编制逻辑，xbase就不会填。我猜好多天健的小朋友都不怎么理解xbase的逻辑。天健的每个科目底稿都有一个xbase，小哥在天健的时候，从来没鸟过它，主要是不知道咋填。如果天健的每个小朋友都懂xbase的原理，小朋友在做底稿的时候顺便把属于自己科目的xbase给编了，到时候项目经理只需把各个科目的xbase汇总起来，一个又快速、又准确的现金流量表就出来了。

所以，小哥觉得，xbase的作用就是分工，把编现金流的任务分给每一个小朋友。不知道xbase设置者的初衷是不是这样，小哥觉得是。

说了这么多，那么xbase到底怎么填？

要回答这个问题，我们还要再问一个问题，用小哥的模板填现金流，大家会填吗？

如果不会，请先把小哥的模板法学会，再来学xbase，小哥是在此基础上讲的。学小哥的模板法也就一两个小时就能学会了。

如果会，那就好办了，证明每一个科目你都会填。既然你每个科目都会填，你就在xbase上填数，直到填出来的数字能使得**分析分录**这张表中的现金流项目跟“假设按照小哥的模板法的结果一样”。

下面我们举3个例子来说明。

**①其他应收**

其他应收款分为原值的变动额和坏账准备的变动额。

**原值变动额**

在xbase中，原值变动额是“轧”出来的。逻辑是，如果最终是正数，就轧到贷方的“支付其他与经营活动有关的现金”，如果是负数，就轧到“收到其他与经营活动有关的现金”。

如果大家想用净额填的话，就不用管原值这块了，让它直接轧到“收到”或“支付”的其他。

但是，如果我们想要准确一点，想要用发生额填的话，就把贷方的发生额填到“收到”的其他，然后，公式就会自动把剩下的变动额（也就是借方）轧到“支付”的其他。

举个例子，其他应收款原值的借方发生额400万，贷方发生额300万，如果不填xbase的话，它就会直接把100万变动额倒轧到经营活动支付的其他。我们想让它按发生额列示，就要在xbase的其他应收款的“收回其他大额经营性款项”填一个300万，如下图。

![](https://img.richfan.site/obsidian/xbase讲义_2.webp) 

填完之后，xbase的公式就会自动把这300万链接到分析分录中，然后倒挤数经营活动支付的其他就变成的400万，这样的结果，就跟我们前面讲的模板法一样了。如下图

![](https://img.richfan.site/obsidian/xbase讲义_3.webp) 

**坏账变动额**

其他应收款的坏账变动额，轧到“购建固定资产、无形资产和其他长期资产支付的现金”，我们看后面的信用减值损失，它也是轧到“购建固定资产、无形资产和其他长期资产支付的现金”。只要坏账的变动额跟信用减值损失的发生额能够对上，它们都轧到同一个现金流项目，借贷方向相反，就自动抵消掉现金流了。这个跟我们的模板法也很像，模板法也是把它们填在同一列，借方用负数，贷方用正数，汇总起来就等于零。可见xbase的处理逻辑跟我们的模板法是一样的。

有同学可能会问，天健的模板为什么把它放到“购建固定资产”，放其他现金流项目它不香吗？可能是为了方便检查吧，因为构建长期资产支付的现金这个科目，跟各个长期资产的借方汇总数核对，如果不一致，就可能有问题，找问题的时候好找。如果放到“销售商品收到的现金”也是可以的，不过这个项目有太多因素影响了，万一勾稽不上，原因就难找了。这估计就是xbase设计者的初衷吧。

还有一点需要注意的，万一往来款的变动额跟信用减值损失勾稽不上呢？原因是有坏账核销，坏账核销的分录是，借坏账准备，贷应收账款（其他应收款）。借方的坏账准备，使得坏账准备的变动额不等于信用减值损失的发生额。实际上，贷方的坏账准备才能跟信用减值损失勾稽上，也就是在没有核销坏账的情况下，坏账准备的变动额与信用减值损失勾稽才能勾稽上。

所以，存在坏账核销的情况下，我们要在xbase里面填一个坏账核销的数字，分析分录中倒轧到“购建固定资产、无形资产和其他长期资产支付的现金”的数字，跟信用减值损失轧到“购建固定资产、无形资产和其他长期资产支付的现金”的数字才相等。

用简单点的话来说，就是存在坏账核销的情况下，要把坏账的变动额轧成坏账的贷方发生额，使得它跟信用减值损失能够一借一贷抵消掉。

而我们的模板法，则是把坏账准备的贷方发生额，和对应的资产减值损失，一起填到不影响现金流中的“信用减值损失”项目，这个项目汇总起来要等于零。由此可见，我们的模板法和xbase的处理逻辑是一样的，只是表现形式不一样而已。

**②固定资产**

Xbase把固定资产变动额，分为原值变动额，累计折旧变动额，和减值准备的变动额。由于减值准备跟坏账准备比较像并且很少见，大家参照坏账准备去理解就行。

**原值变动额**

我们的模板法中，固定资产原值是按照借贷方去填的，借方填到“购建固定资产、无形资产和其他长期资产支付的现金”，贷方填到“处置固定资产、无形资产和其他长期资产收回的现金净额”。

而分析分录中，倒轧项是轧到“购建固定资产、无形资产和其他长期资产支付的现金”。因此我们只要在xbase中填一下贷方发生额，分析分录中就会把它引用到“处置固定资产、无形资产和其他长期资产收回的现金净额”，那么最终倒轧出来的数，就是借方发生额。这样的结果就跟我们的模板法是一样的了。

**累计折旧变动额**

我们的模板法中，累计折旧也是按照借贷方去填的，借方填到“处置固定资产、无形资产和其他长期资产收回的现金净额”；贷方发生额，则要先跟成本费用勾稽上，然后再一起填到不影响现金流项目的“固定资产折旧”。

在xbase方法的分析分录中，倒轧项是轧到“购建固定资产、无形资产和其他长期资产支付的现金”，因为无论折旧的借方还是贷方，都不会用到这个项目，所以这个倒轧项要等于零。小哥觉得这里可以优化一下，把倒轧项放到“处置固定资产、无形资产和其他长期资产收回的现金净额”，这样我们只要把累计折旧的贷方填好就行，借方就自动轧到对应的地方了。因为倒轧项要等于零，所以累计折旧的借方和贷方发生额都要在xbase中填了。把借方发生额填到xbase中的“盘亏、出售、报废、毁损而转出”。累计折旧贷方发生额，有多少计入成本，有多少计入费用，先勾稽上，对应成本的金额填到“计入制造费用、生产成本、其他业务成本等成本类项目”，对应费用的填到“计入管理费用、销售费用”。

假设累计折旧借方发生额为60万，贷方发生额为500万，其中300万对应成本，200万对应费用，xbase的填法如下图。

![](https://img.richfan.site/obsidian/xbase讲义_4.webp) 

填好之后，分析分录如下图。

![](https://img.richfan.site/obsidian/xbase讲义_5.webp) 

我们可以看到，分析分录是把计入成本的累计折旧用负数放到“购买商品、接受劳务支付的现金”，把计入费用的折旧用负数放到“支付其他与经营活动有关的现金”。因为后面的主营业务成本，和销售费用、管理费用也是计入这两个现金流项目，这里的负数，会和后面的正数相抵消。也就是说，折旧和它对应的成本费用是放到同一个项目的，正负号相反，只要能勾稽上，它们就能自动抵消，折旧本身就不涉及现金流，抵消掉之后，也不影响现金流，所以这么操作就是对的。

我们的模板法，也是把折旧和对应的成本费用放到同一列，跟xbase的原理还是一样的。

通过上面两个科目的填法，可以发现，我们的模板法，跟天健的xbase原理是一样的！我们是在一张模板中填，按发生额填。而xbase也是按发生额填的，因为分析分录中的倒轧只能轧到其中一个项目，对于那些借贷方发生额对应不同项目的，就要到xbase中填，这样才准确。所以，xbase的作用就是修正分析分录的，使得分析分录呈现的现金流跟实际情况一致。

至于其他科目的填法，我会在视频中讲解。如果学会了我们的模板法，再学天健的xbase，就会非常非常简单，只要把分析分录呈现出我们模板法中的样子就行了。

同一个案例，小哥分别用xbase和模板法编，得出的结果是一样的。所以，大家学习的时候，用我给大家提供的例子，用xbase，跟着我的视频讲解操作一遍，就能掌握xbase的用法了。当然，你想用你们公司的案例也行。

（3）分析分录（综合分析）

分析分录（综合分析）这张表是自动生成的，按照小哥的理解，它就是把前面的“分析分录”给综合起来，就叫“综合分析”，比如“销售商品、提供劳务收到的现金”，把涉及到这个项目的应收账款、预收、增值税、营业收入等都综合到一起，我们就能看到“销售商品、提供劳务收到的现金”是由哪些项目导致的，作用主要就是这个，因为分析分录太零散了，不好找。

如果用我们的模板法理解的话，就相当于把我们的模板法的每一个现金流项目纵向所有的数字都摘录出来，有助于看到每一个现金流项目是有哪些资产负债表科目形成的。

这张表主要是做分析用，自动生成的，所以一般不用管。

还有一点，分析分录（综合分析）比较像初级、中级会计实务教材里面介绍的方法，也就是工作底稿法。因为工作底稿法的逻辑不是很清晰，导致好多同学感觉现金流很难。小哥的课件也有专门讲解工作底稿法的逻辑以及编制方法，破解了这些方法之后，你就会发现，其实所有的方法，背后的逻辑都是一样的，要把现金流编平太简单了，要编准确、能通过质控的各种质问也不在话下。

（4）补充分录

通过前面的讲解，我们知道xbase的逻辑是：分析分录中的公式已经能自动生成一张平的现金流量表了，只是不准确而已，xbase表就是把它修正，使它趋向于准确。然而，有些比较特殊的科目，就连xbase也无法修正的，我们还可以通过补充分录来修正。比如用合并后的资产负债表、利润表及附注来编合并现金流量表，存在购买子公司、处置子公司时，xbase就解决不了，就只能通过分析分录来调整了。

（5）现金流量表

现金流量表是自动生成的，它的取数来源于分析分录。因此，我们要检查现金流量表是否准确的时候，只要检查分析分录就行，结合科目余额表，对分析分录的每一个项目进行检查，只要分析分录准确，现金流量表就准确了。

（6）补充资料

补充资料，也就是附表。我们的模板法能自动生成，xbase也能自动生成，但xbase的逻辑并没有我们的模板法那么清晰。因此，大家可以用我们的模板法中的逻辑去理解xbase的逻辑。

因为补充资料是从净利润计算到经营活动产生的现金流量净额的，学过模板法的同学都知道：经营活动产生的现金流量净额 = 记到经营活动现金的利润 + 记到经营活动现金的资产负债表科目。

因此，我们只要保证所有**非经营**利润，和所有记到经营活动现金的资产负债表科目，都体现补充资料中，那么补充资料肯定是平的。

天健的这个补充资料生成方法逻辑不是很严谨，遇到一些比较特殊的科目，可能会不平。所以，发现附表不平的时候，就看一下**非经营性净利润，和记到经营活动现金的资产负债表科目**，还有谁没体现补充资料中。这些项目，都能在分析分录中找到，或者在分析分录（综合分析）这张表找。